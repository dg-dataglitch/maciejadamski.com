<!doctype html><html lang="en" class="dark h-full antialiased overflow-y-scroll"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><!-- Basic Meta Tags --><title>Cleaning the digital attic; automating Cloudflare Pages with Go - Maciej Adamski</title><meta name="description" content="A concurrency-first Go utility to clean up old Cloudflare Pages deployments safely and fast."><meta name="robots" content="index, follow"><link rel="canonical" href="https://maciejadamski.com/blog/cleaning-digital-attic-cloudflare-pages/"><!-- Favicon --><link rel="icon" href="/static/favicon.ico" type="image/x-icon"><!-- Open Graph --><meta property="og:type" content="website"><meta property="og:url" content="https://maciejadamski.com/blog/cleaning-digital-attic-cloudflare-pages/"><meta property="og:title" content="Cleaning the digital attic; automating Cloudflare Pages with Go - Maciej Adamski"><meta property="og:description" content="A concurrency-first Go utility to clean up old Cloudflare Pages deployments safely and fast."><meta property="og:image" content="https://maciejadamski.com/static/og-image.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="og:image:alt" content="Maciej Adamski - Software Engineer"><meta property="og:site_name" content="Maciej Adamski"><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Cleaning the digital attic; automating Cloudflare Pages with Go - Maciej Adamski"><meta name="twitter:description" content="A concurrency-first Go utility to clean up old Cloudflare Pages deployments safely and fast."><meta name="twitter:image" content="https://maciejadamski.com/static/og-image.png"><meta name="twitter:site" content="@maciejadamski"><!-- Google Verification --><meta name="google-site-verification" content="Nax5qJbDjGM1csEKyBZpz9fu0fiEEsj_NhaR6VD5AYE"><!-- Structured Data (JSON-LD) --><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","datePublished":"2026-01-21","description":"A concurrency-first Go utility to clean up old Cloudflare Pages deployments safely and fast.","headline":"Cleaning the digital attic; automating Cloudflare Pages with Go - Maciej Adamski","image":"https://maciejadamski.com/static/og-image.png","mainEntityOfPage":{"@id":"https://maciejadamski.com/blog/cleaning-digital-attic-cloudflare-pages/","@type":"WebPage"},"publisher":{"@type":"Organization","name":"Maciej Adamski"},"url":"https://maciejadamski.com/blog/cleaning-digital-attic-cloudflare-pages/"}</script><!-- Fonts: Dynamic based on config + JetBrains Mono for code --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Google+Sans+Flex:opsz,wght@6..144,1..1000&amp;family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@100..800&display=swap" rel="stylesheet"><!-- Custom CSS --><link rel="stylesheet" href="/static/css/prose.css"><!-- Tailwind CSS --><script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script><script src="https://cdn.jsdelivr.net/npm/@tailwindplus/elements@1" type="module"></script><!-- Theme Config -->
		<style>
		:root {
			--font-sans: 'Google Sans Flex', 'Inter', sans-serif;
			--font-mono: 'JetBrains Mono', monospace;
			--color-text-heading: #121317;
			--color-text-body: #5f6368;
			--color-text-muted: #70757a;
			--color-text-bold: #121317;
			--color-text-italic: #3c4043;
			--color-text-code: #52008d;
			--color-text-pre: #e8eaed;
			--color-link: #0b57d0;
			--color-brand: #52008d;
			--color-surface: #f8f9fc;
			--color-page-background: #ffffff;
			--color-border: #dadce0;
			--color-border-dark: #c4c7cc;
			--color-scrollbar: #a8a29e;
			--color-code-background: #212226;
			--radius-container: 8px;
		}
		</style>
	<style type="text/tailwindcss">
				@theme {
						--font-sans: var(--font-sans);
						--font-mono: var(--font-mono);
						--color-heading: var(--color-text-heading);
						--color-body: var(--color-text-body);
						--color-bold: var(--color-text-bold);
						--color-italic: var(--color-text-italic);
						--color-code: var(--color-text-code);
						--color-pre: var(--color-text-pre);
						--color-link: var(--color-link);
						--color-brand: var(--color-brand);
						--color-surface: var(--color-surface);
						--color-page-background: var(--color-page-background);
						--color-border: var(--color-border);
				}
			</style><!-- Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-8N2WJRPVCH"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','G-8N2WJRPVCH');</script></head><body class="min-h-full flex flex-col antialiased bg-page-background text-text-body"><header class="fixed inset-x-0 top-0 z-50 bg-white border-b border-border"><nav aria-label="Global" class="mx-auto max-w-7xl flex items-center justify-between px-4 py-3 lg:px-8"><a href="/" class="flex-1 lg:flex-initial"><span class="text-2xl text-heading font-bold tracking-tight">ma_</span></a><!-- Mobile menu button --><button type="button" command="show-modal" commandfor="mobile-menu" class="lg:hidden inline-flex items-center justify-center rounded-full bg-heading text-white px-4 py-2"><span class="sr-only">Open menu</span> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="size-5"><path d="M4 6h16M4 12h16M4 18h16" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><!-- Desktop navigation --><div class="hidden lg:flex lg:gap-x-8"><a href="/blog/" class="text-sm font-medium text-body">/blog</a> <a href="/blog/ai-coding-partner-instructions-go/" class="text-sm font-medium text-body">/ai-rules</a> <a href="/#contact" class="text-sm font-medium text-body">/contact</a></div></nav></header><!-- Mobile menu --><el-dialog><dialog id="mobile-menu" class="fixed inset-0 m-0 w-full h-full max-w-none max-h-none border-0 bg-white p-0 lg:hidden"><div class="h-full overflow-y-auto"><div class="flex items-center justify-between px-4 py-3 border-b border-border"><a href="/"><span class="text-2xl text-heading font-bold tracking-tight">ma_</span></a> <button type="button" command="close" commandfor="mobile-menu" class="inline-flex items-center justify-center rounded-full bg-heading text-white px-4 py-2"><span class="sr-only">Close menu</span> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="size-5"><path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div><nav class="px-4 py-6"><a href="/blog/" class="block py-6 text-2xl font-medium text-heading border-b border-border">/blog</a> <a href="/blog/ai-coding-partner-instructions-go/" class="block py-6 text-2xl font-medium text-heading border-b border-border">/ai-rules</a> <a href="/#contact" class="block py-6 text-2xl font-medium text-heading border-b border-border">/contact</a></nav></div></dialog></el-dialog><main class="flex-1"><article class="max-w-3xl mx-auto py-24 px-4 lg:px-8"><header class="mb-12"><h1 class="text-4xl text-heading font-semibold tracking-tight leading-tight mb-4">Cleaning the digital attic; automating Cloudflare Pages with Go</h1><div class="flex gap-4 text-body text-sm"><span>January 21, 2026</span></div></header><div class="prose prose-invert max-w-none"><p>In modern web development, &quot;set it and forget it&quot; is a lie. I ran into a different kind of mess while cleaning up my Cloudflare organization. I could not delete unused Cloudflare Workers for my websites because there were hundreds of old Cloudflare Pages deployments tied to those previews. Every branch, every preview, and every minor tweak was living forever in the Cloudflare cloud.</p>
<p>Cloudflare is generous, but thousands of dead deployments make the UI hard to navigate and clutter the project history. I needed a way to wipe the old deployments while keeping production safe and untouched.</p>
<h2>The problem: manual cleanup doesn't scale</h2>
<p>Cloudflare's dashboard is fine for a few deployments, but manually clicking &quot;Delete&quot; on hundreds is not a task for an engineer. In my case I had more than 400 deployments, and deleting them by hand would take a lot of time. I needed a tool that was:</p>
<ul>
<li><strong>Fast</strong> &gt; It should handle deletions in parallel.</li>
<li><strong>Safe</strong> &gt; It must never, under any circumstances, delete the active production site.</li>
<li><strong>Simple</strong> &gt; No heavy dependencies. Just a single binary I can run from my terminal.</li>
</ul>
<h2>The solution: a concurrency-first Go utility</h2>
<p>I chose Go for this task because of its first-class support for concurrency and its clear, practical approach to systems tooling.</p>
<h3>1. The &quot;bouncer&quot; pattern (semaphores)</h3>
<p>When hitting an API, you cannot just fire off 1,000 requests at once. You will hit rate limits or exhaust your local network sockets. I implemented a semaphore pattern using Go channels.</p>
<p>By using a buffered channel, I created a &quot;bouncer&quot; that only allows 15 workers into the &quot;club&quot; at any given time. This keeps the execution fast but respectful of Cloudflare's API limits.</p>
<h3>2. Failing fast and being &quot;production-aware&quot;</h3>
<p>The most dangerous part of an automated deletion script is the risk of deleting the live site. I designed the filtering logic to be strictly production-aware.</p>
<p>Before the script even attempts a deletion, it inspects the deployment metadata. If the environment is marked as production, the script skips it entirely. Even if that check fails, I added a secondary layer: the script parses the raw JSON error bodies from Cloudflare. When we hit the specific error <code>8000034</code> (&quot;Cannot delete active production&quot;), the script handles it gracefully instead of crashing.</p>
<h3>3. The &quot;maintainless&quot; workflow</h3>
<p>Following the KISS (Keep It Simple, Stupid) principle, I wrapped the entire logic in a Makefile. I do not want to remember complex CLI flags or environment variable exports.</p>
<ul>
<li><code>make run</code>: Cleans up the default project.</li>
<li><code>make nuke project_name=xxx</code>: Targets a specific site.</li>
</ul>
<p>This local-first approach ensures I can verify the cleanup on my machine before even thinking about putting it into a CI/CD pipeline.</p>
<h2>Engineering lessons learned</h2>
<ul>
<li><strong>Simple is not easy</strong> &gt; Writing a script that does not get stuck in an infinite loop when it hits a protected resource takes more thought than just a basic for loop.</li>
<li><strong>Stream the data</strong> &gt; Using <code>json.NewDecoder</code> allowed the script to handle large batches of deployment data without spiking memory usage.</li>
<li><strong>Secrets belong in the environment</strong> &gt; Using <code>.env</code> files and <code>os.Getenv</code> kept my API tokens safe and out of the source code.</li>
</ul>
<h2>Check out the code</h2>
<p>You can find the full source code, the Makefile, and the documentation on my GitHub: <a href="https://github.com/dg-dataglitch/cloudflare-pages-cleanup">https://github.com/dg-dataglitch/cloudflare-pages-cleanup</a></p>
</div><footer class="mt-16 pt-8 border-t border-border"><a href="/blog/" class="text-sm font-semibold text-link underline underline-offset-4"><span aria-hidden="true">&larr;</span> Back to blog</a></footer></article></main><footer class="border-t border-border"><div class="mx-auto max-w-7xl px-6 py-16 flex items-center justify-center lg:px-8"><p class="text-center text-sm text-body">&copy; 2026 Maciej Adamski. All rights reserved.</p></div></footer></body></html>