<!doctype html><html lang="en" class="dark h-full antialiased overflow-y-scroll"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><!-- Fonts: JetBrains Mono --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@100..800&display=swap" rel="stylesheet"><!-- Custom CSS --><link rel="stylesheet" href="/static/css/prose.css"><link rel="icon" href="/static/favicon.ico" type="image/x-icon"><title>Cleaning the digital attic; automating Cloudflare Pages with Go | Maciej Adamski</title><meta name="description" content="A concurrency-first Go utility to clean up old Cloudflare Pages deployments safely and fast."><link rel="canonical" href="https://maciejadamski.com/blog/cleaning-digital-attic-cloudflare-pages/"><meta name="robots" content="index,follow"><!-- Open Graph --><meta property="og:type" content="article"><meta property="og:url" content="https://maciejadamski.com/blog/cleaning-digital-attic-cloudflare-pages/"><meta property="og:title" content="Cleaning the digital attic; automating Cloudflare Pages with Go | Maciej Adamski"><meta property="og:description" content="A concurrency-first Go utility to clean up old Cloudflare Pages deployments safely and fast."><meta property="og:image" content="https://maciejadamski.com/static/og-image.png"><meta property="og:site_name" content="Maciej Adamski"><!-- Twitter --><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Cleaning the digital attic; automating Cloudflare Pages with Go | Maciej Adamski"><meta name="twitter:description" content="A concurrency-first Go utility to clean up old Cloudflare Pages deployments safely and fast."><meta name="twitter:image" content="https://maciejadamski.com/static/og-image.png"><!-- Google --><!-- Structured Data --><script type="application/ld+json">{ articleJSON(site, seo, currentPath) }</script><!-- Tailwind CSS --><script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script><script src="https://cdn.jsdelivr.net/npm/@tailwindplus/elements@1" type="module"></script><style type="text/tailwindcss">
				@theme {
						--font-sans: 'JetBrains Mono', monospace;
						--font-mono: 'JetBrains Mono', monospace;
						--color-white: #e4e4e5;
						--color-gray: #909093;
						--color-link: #b2c3ff;
						--color-surface: #343438;
						--color-border: #39393b;
						--color-page-background: #1c1c1d;
				}
			</style><!-- Analytics --></head><body class="bg-page-background font-mono text-white text-base min-h-full flex flex-col"><header class="absolute inset-x-0 top-0 z-50"><nav aria-label="Global" class="mx-auto max-w-7xl flex items-center justify-between p-4 lg:px-8"><div class="flex lg:flex-1"><a href="/" class="-m-1.5 p-1.5 text-white"><span class="block text-2xl font-bold leading-none tracking-tight"><span class="text-link inline-block mr-2">&gt;</span>ma<span class="text-link">_</span></span> <span class="block text-xs font-semibold tracking-wide leading-none mt-1">Maciej Adamski</span></a></div><div class="flex lg:hidden"><button type="button" command="show-modal" commandfor="mobile-menu" class="-m-2.5 inline-flex items-center justify-center rounded-md p-2.5 text-gray"><span class="sr-only">Open main menu</span> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-slot="icon" aria-hidden="true" class="size-6"><path d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div><div class="hidden lg:flex lg:gap-x-12"><a href="/blog/" class="text-sm/6 font-semibold text-link underline underline-offset-4">/blog</a> <a href="https://www.linkedin.com/in/maciejadamski89/" target="_blank" class="text-sm/6 font-semibold text-link underline underline-offset-4">/linkedin</a></div></nav></header><el-dialog><dialog id="mobile-menu" class="fixed inset-0 m-0 w-full max-w-none border-0 bg-transparent p-0 backdrop:bg-transparent lg:hidden"><div tabindex="0" class="fixed inset-0"><el-dialog-panel class="fixed inset-y-0 right-0 z-50 w-full overflow-y-auto bg-surface p-4 sm:max-w-sm"><div class="flex items-center justify-between"><a href="/" class="-m-1.5 p-1.5 text-white"><span class="block text-2xl font-bold leading-none tracking-tight"><span class="text-link inline-block mr-2">&gt;</span>ma<span class="text-link">_</span></span> <span class="block text-xs font-semibold tracking-wide leading-none mt-1">Maciej Adamski</span></a> <button type="button" command="close" commandfor="mobile-menu" class="-m-2.5 rounded-md p-2.5 text-gray"><span class="sr-only">Close menu</span> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-slot="icon" aria-hidden="true" class="size-6"><path d="M6 18 18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div><div class="mt-6 flow-root"><div class="-my-6 divide-y divide-gray-500/10"><div class="space-y-2 py-6"><a href="/blog/" class="block py-2 text-base/7 font-semibold text-link underline underline-offset-4">/blog</a> <a href="https://www.linkedin.com/in/maciejadamski89/" target="_blank" class="block py-2 text-base/7 font-semibold text-link underline underline-offset-4">/linkedin</a></div></div></div></el-dialog-panel></div></dialog></el-dialog><main class="flex-1"><article class="max-w-3xl mx-auto px-6 py-24"><header class="mb-12"><h1 class="text-4xl font-semibold tracking-tight leading-tight mb-4">Cleaning the digital attic; automating Cloudflare Pages with Go</h1><div class="flex gap-4 text-gray text-sm"><span>January 21, 2026</span></div></header><div class="prose prose-invert max-w-none"><p>In modern web development, &quot;set it and forget it&quot; is a lie. I ran into a different kind of mess while cleaning up my Cloudflare organization. I could not delete unused Cloudflare Workers for my websites because there were hundreds of old Cloudflare Pages deployments tied to those previews. Every branch, every preview, and every minor tweak was living forever in the Cloudflare cloud.</p>
<p>Cloudflare is generous, but thousands of dead deployments make the UI hard to navigate and clutter the project history. I needed a way to wipe the old deployments while keeping production safe and untouched.</p>
<h2>The problem: manual cleanup doesn't scale</h2>
<p>Cloudflare's dashboard is fine for a few deployments, but manually clicking &quot;Delete&quot; on hundreds is not a task for an engineer. In my case I had more than 400 deployments, and deleting them by hand would take a lot of time. I needed a tool that was:</p>
<ul>
<li><strong>Fast</strong> &gt; It should handle deletions in parallel.</li>
<li><strong>Safe</strong> &gt; It must never, under any circumstances, delete the active production site.</li>
<li><strong>Simple</strong> &gt; No heavy dependencies. Just a single binary I can run from my terminal.</li>
</ul>
<h2>The solution: a concurrency-first Go utility</h2>
<p>I chose Go for this task because of its first-class support for concurrency and its clear, practical approach to systems tooling.</p>
<h3>1. The &quot;bouncer&quot; pattern (semaphores)</h3>
<p>When hitting an API, you cannot just fire off 1,000 requests at once. You will hit rate limits or exhaust your local network sockets. I implemented a semaphore pattern using Go channels.</p>
<p>By using a buffered channel, I created a &quot;bouncer&quot; that only allows 15 workers into the &quot;club&quot; at any given time. This keeps the execution fast but respectful of Cloudflare's API limits.</p>
<h3>2. Failing fast and being &quot;production-aware&quot;</h3>
<p>The most dangerous part of an automated deletion script is the risk of deleting the live site. I designed the filtering logic to be strictly production-aware.</p>
<p>Before the script even attempts a deletion, it inspects the deployment metadata. If the environment is marked as production, the script skips it entirely. Even if that check fails, I added a secondary layer: the script parses the raw JSON error bodies from Cloudflare. When we hit the specific error <code>8000034</code> (&quot;Cannot delete active production&quot;), the script handles it gracefully instead of crashing.</p>
<h3>3. The &quot;maintainless&quot; workflow</h3>
<p>Following the KISS (Keep It Simple, Stupid) principle, I wrapped the entire logic in a Makefile. I do not want to remember complex CLI flags or environment variable exports.</p>
<ul>
<li><code>make run</code>: Cleans up the default project.</li>
<li><code>make nuke project_name=xxx</code>: Targets a specific site.</li>
</ul>
<p>This local-first approach ensures I can verify the cleanup on my machine before even thinking about putting it into a CI/CD pipeline.</p>
<h2>Engineering lessons learned</h2>
<ul>
<li><strong>Simple is not easy</strong> &gt; Writing a script that does not get stuck in an infinite loop when it hits a protected resource takes more thought than just a basic for loop.</li>
<li><strong>Stream the data</strong> &gt; Using <code>json.NewDecoder</code> allowed the script to handle large batches of deployment data without spiking memory usage.</li>
<li><strong>Secrets belong in the environment</strong> &gt; Using <code>.env</code> files and <code>os.Getenv</code> kept my API tokens safe and out of the source code.</li>
</ul>
<h2>Check out the code</h2>
<p>You can find the full source code, the Makefile, and the documentation on my GitHub: <a href="https://github.com/dg-dataglitch/cloudflare-pages-cleanup">https://github.com/dg-dataglitch/cloudflare-pages-cleanup</a></p>
</div><footer class="mt-16 pt-8 border-t border-border"><a href="/blog/" class="text-sm font-semibold text-link underline underline-offset-4"><span aria-hidden="true">&larr;</span> Back to blog</a></footer></article></main><footer class="border-t border-border"><div class="mx-auto max-w-7xl px-6 py-16 flex items-center justify-center lg:px-8"><p class="text-center text-xs leading-5 text-gray">&copy; 2026 Maciej Adamski. All rights reserved.</p></div></footer></body></html>